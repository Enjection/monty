[platformio]
default_envs = nucleo-l432

[env]
lib_compat_mode = strict

[env:native]
platform = native
src_filter = +<native-*>
build_flags =
  -std=c++11
  -fno-exceptions
  -Wall
  -Wextra
  -Wno-implicit-fallthrough
  -DNATIVE

[stm32]
targets = upload
platform = ststm32
framework = stm32cube
src_filter = +<stm32-*>
lib_deps = jeeh
monitor_speed = 115200

[env:nucleo-f103]
extends = stm32
board = nucleo_f103rb
build_flags = -Wno-format -DSTM32F1

[env:nucleo-l432]
extends = stm32
board = nucleo_l432kc
build_flags = -Wno-format -DSTM32L4

[env:utest]
extends = env:nucleo-l432
test_transport = custom
