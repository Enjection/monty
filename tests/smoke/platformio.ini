# default settings for all builds
[env]
build_unflags = -std=c++11
build_flags = -std=c++17 -Wall -Wextra

# all native builds, i.e. macos and linux
[native]
platform = native
build_flags = ${env.build_flags} -DNATIVE

# all STM32 embedded builds
[stm32]
targets = upload
platform = ststm32
framework = cmsis
board = nucleo_l432kc
build_flags = ${env.build_flags} -DSTM32
monitor_speed = 115200
test_speed = 115200
test_transport = custom

[env:smoke1]
extends = native
src_filter = +<main1.cpp>

[env:smoke2]
extends = stm32
src_filter = +<main2.cpp>

[env:smoke3]
extends = stm32
src_filter = +<main3.cpp>

[env:smoke4]
extends = stm32
targets = upload, monitor
src_filter = +<main4.cpp>
