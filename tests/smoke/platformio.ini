[platformio]
src_dir = .

# default settings for all builds
[env]
lib_compat_mode = strict
build_unflags = -std=c++11
build_flags = -std=c++17 -Wall -Wextra

# all native builds, i.e. macos and linux
[native]
platform = native
build_flags = ${env.build_flags} -DNATIVE

# all STM32 embedded builds
[stm32]
targets = upload
platform = ststm32
framework = cmsis
board = nucleo_l432kc
build_flags = ${env.build_flags} -DSTM32 -DSTM32L4 -Wno-format
monitor_speed = 115200
test_speed = 115200
test_transport = custom

[env:t01native]
extends = native
src_filter = +<main01.cpp>

[env:t02blink]
extends = stm32
src_filter = +<main02.cpp>

[env:t03cmsis]
extends = stm32
src_filter = +<main03.cpp>

[env:t04uart]
extends = stm32
targets = upload, monitor
src_filter = +<main04.cpp>

[env:t05hall]
extends = env:t04uart
src_filter = +<main05.cpp>
lib_extra_dirs = ../../lib

[env:t06printf]
extends = env:t05hall
src_filter = +<main06.cpp>

[env:t07fiber]
extends = env:t05hall
src_filter = +<main07.cpp>

[env:t08dma]
extends = env:t05hall
src_filter = +<main08.cpp>

[env:t09idle]
extends = env:t05hall
src_filter = +<main09.cpp>

[env:t10multi]
extends = env:t05hall
src_filter = +<main10.cpp>
